# 25-Node Kubernetes Cluster Ï†ÑÏ≤¥ ÎÖ∏Îìú Î¶¨ÏÜåÏä§ ÎåÄÏãúÎ≥¥Îìú
# Î™©Ï†Å: Î™®Îì† ÌÅ¥Îü¨Ïä§ÌÑ∞ ÎÖ∏ÎìúÏùò CPU, Memory, Disk, Network ÏÇ¨Ïö©Îüâ Ïã§ÏãúÍ∞Ñ Î™®ÎãàÌÑ∞ÎßÅ
# Íµ¨ÏÑ±: ÏÉÅÎã® ÏöîÏïΩ + 25Í∞ú ÎÖ∏Îìú ÏÉÅÏÑ∏ ÌÖåÏù¥Î∏î (ÎÖ∏ÎìúÎãπ 1Ìñâ)
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-cluster-all-nodes
  namespace: prometheus
  labels:
    grafana_dashboard: '1'
    app: grafana
  annotations:
    grafana_folder: Cluster Overview
data:
  cluster-all-nodes.json: |
    {
      "title": "üñ•Ô∏è 25-Node Cluster - All Resources",
      "uid": "cluster-all-nodes-v2",
      "version": 2,
      "timezone": "browser",
      "schemaVersion": 38,
      "refresh": "30s",
      "time": { "from": "now-1h", "to": "now" },
      "templating": {
        "list": [
          {
            "name": "datasource",
            "type": "datasource",
            "query": "prometheus",
            "current": { "text": "Prometheus", "value": "prometheus" },
            "hide": 2
          }
        ]
      },
      "panels": [
        {
          "title": "üìä Cluster Summary - Resource Usage",
          "type": "row",
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
          "collapsed": false
        },
        {
          "title": "Total Nodes",
          "type": "stat",
          "gridPos": { "h": 4, "w": 3, "x": 0, "y": 1 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "count(node_uname_info{job=\"node-exporter\"})",
              "legendFormat": "Nodes"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 20 },
                  { "color": "red", "value": 10 }
                ]
              }
            }
          }
        },
        {
          "title": "Cluster CPU %",
          "type": "gauge",
          "gridPos": { "h": 4, "w": 4, "x": 3, "y": 1 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m])) * 100)",
              "legendFormat": "CPU"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 50 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "Cluster Memory %",
          "type": "gauge",
          "gridPos": { "h": 4, "w": 4, "x": 7, "y": 1 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "(1 - avg(node_memory_MemAvailable_bytes{job=\"node-exporter\"} / node_memory_MemTotal_bytes{job=\"node-exporter\"})) * 100",
              "legendFormat": "Memory"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "Cluster Disk %",
          "type": "gauge",
          "gridPos": { "h": 4, "w": 4, "x": 11, "y": 1 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "(1 - avg(node_filesystem_avail_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"} / node_filesystem_size_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"})) * 100",
              "legendFormat": "Disk"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 70 },
                  { "color": "red", "value": 85 }
                ]
              }
            }
          }
        },
        {
          "title": "Network RX (MB/s)",
          "type": "stat",
          "gridPos": { "h": 4, "w": 3, "x": 15, "y": 1 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "sum(rate(node_network_receive_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m])) / 1024 / 1024",
              "legendFormat": "RX"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "MBs",
              "decimals": 1,
              "color": { "mode": "palette-classic" }
            }
          }
        },
        {
          "title": "Network TX (MB/s)",
          "type": "stat",
          "gridPos": { "h": 4, "w": 3, "x": 18, "y": 1 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "sum(rate(node_network_transmit_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m])) / 1024 / 1024",
              "legendFormat": "TX"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "MBs",
              "decimals": 1,
              "color": { "mode": "palette-classic" }
            }
          }
        },
        {
          "title": "Total Memory",
          "type": "stat",
          "gridPos": { "h": 4, "w": 3, "x": 21, "y": 1 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "sum(node_memory_MemTotal_bytes{job=\"node-exporter\"}) / 1024 / 1024 / 1024",
              "legendFormat": "Total GB"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "decgbytes",
              "decimals": 0
            }
          }
        },
        {
          "title": "üìã All 25 Nodes - Detailed Metrics (CPU | Memory | Disk | Network)",
          "type": "row",
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 5 },
          "collapsed": false
        },
        {
          "title": "All Nodes Resource Table",
          "type": "table",
          "gridPos": { "h": 16, "w": 24, "x": 0, "y": 6 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg by (nodename) (rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{}) * 100)",
              "legendFormat": "{{nodename}}",
              "instant": true,
              "format": "table",
              "refId": "CPU"
            },
            {
              "expr": "(1 - (node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(nodename) node_uname_info{} / node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(nodename) node_uname_info{})) * 100",
              "legendFormat": "{{nodename}}",
              "instant": true,
              "format": "table",
              "refId": "Memory"
            },
            {
              "expr": "(1 - (node_filesystem_avail_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"} * on(instance) group_left(nodename) node_uname_info{} / node_filesystem_size_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"} * on(instance) group_left(nodename) node_uname_info{})) * 100",
              "legendFormat": "{{nodename}}",
              "instant": true,
              "format": "table",
              "refId": "Disk"
            },
            {
              "expr": "sum by (nodename) (rate(node_network_receive_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m]) * on(instance) group_left(nodename) node_uname_info{}) / 1024 / 1024",
              "legendFormat": "{{nodename}}",
              "instant": true,
              "format": "table",
              "refId": "NetworkRX"
            },
            {
              "expr": "sum by (nodename) (rate(node_network_transmit_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m]) * on(instance) group_left(nodename) node_uname_info{}) / 1024 / 1024",
              "legendFormat": "{{nodename}}",
              "instant": true,
              "format": "table",
              "refId": "NetworkTX"
            },
            {
              "expr": "node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(nodename) node_uname_info{} / 1024 / 1024 / 1024",
              "legendFormat": "{{nodename}}",
              "instant": true,
              "format": "table",
              "refId": "MemoryTotal"
            }
          ],
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "instance": true,
                  "job": true,
                  "device": true,
                  "domainname": true,
                  "machine": true,
                  "release": true,
                  "sysname": true,
                  "version": true,
                  "fstype": true,
                  "mountpoint": true
                },
                "indexByName": {
                  "nodename": 0,
                  "Value #CPU": 1,
                  "Value #Memory": 2,
                  "Value #MemoryTotal": 3,
                  "Value #Disk": 4,
                  "Value #NetworkRX": 5,
                  "Value #NetworkTX": 6
                },
                "renameByName": {
                  "nodename": "üè∑Ô∏è Node Name",
                  "Value #CPU": "üíª CPU %",
                  "Value #Memory": "üß† Memory %",
                  "Value #MemoryTotal": "üìä Memory (GB)",
                  "Value #Disk": "üíæ Disk %",
                  "Value #NetworkRX": "‚¨áÔ∏è RX (MB/s)",
                  "Value #NetworkTX": "‚¨ÜÔ∏è TX (MB/s)"
                }
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "field": "üè∑Ô∏è Node Name",
                    "desc": false
                  }
                ]
              }
            }
          ],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "center",
                "displayMode": "auto"
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "üè∑Ô∏è Node Name" },
                "properties": [
                  { "id": "custom.width", "value": 200 },
                  { "id": "custom.align", "value": "left" }
                ]
              },
              {
                "matcher": { "id": "byName", "options": "üíª CPU %" },
                "properties": [
                  { "id": "unit", "value": "percent" },
                  { "id": "decimals", "value": 1 },
                  { "id": "custom.displayMode", "value": "color-background-solid" },
                  { "id": "thresholds", "value": {
                    "mode": "absolute",
                    "steps": [
                      { "color": "green", "value": null },
                      { "color": "yellow", "value": 50 },
                      { "color": "orange", "value": 70 },
                      { "color": "red", "value": 85 }
                    ]
                  }}
                ]
              },
              {
                "matcher": { "id": "byName", "options": "üß† Memory %" },
                "properties": [
                  { "id": "unit", "value": "percent" },
                  { "id": "decimals", "value": 1 },
                  { "id": "custom.displayMode", "value": "color-background-solid" },
                  { "id": "thresholds", "value": {
                    "mode": "absolute",
                    "steps": [
                      { "color": "green", "value": null },
                      { "color": "yellow", "value": 60 },
                      { "color": "orange", "value": 75 },
                      { "color": "red", "value": 85 }
                    ]
                  }}
                ]
              },
              {
                "matcher": { "id": "byName", "options": "üìä Memory (GB)" },
                "properties": [
                  { "id": "unit", "value": "decgbytes" },
                  { "id": "decimals", "value": 1 }
                ]
              },
              {
                "matcher": { "id": "byName", "options": "üíæ Disk %" },
                "properties": [
                  { "id": "unit", "value": "percent" },
                  { "id": "decimals", "value": 1 },
                  { "id": "custom.displayMode", "value": "color-background-solid" },
                  { "id": "thresholds", "value": {
                    "mode": "absolute",
                    "steps": [
                      { "color": "green", "value": null },
                      { "color": "yellow", "value": 60 },
                      { "color": "orange", "value": 75 },
                      { "color": "red", "value": 85 }
                    ]
                  }}
                ]
              },
              {
                "matcher": { "id": "byName", "options": "‚¨áÔ∏è RX (MB/s)" },
                "properties": [
                  { "id": "unit", "value": "MBs" },
                  { "id": "decimals", "value": 2 },
                  { "id": "custom.displayMode", "value": "gradient-gauge" },
                  { "id": "min", "value": 0 },
                  { "id": "max", "value": 50 },
                  { "id": "thresholds", "value": {
                    "mode": "absolute",
                    "steps": [
                      { "color": "blue", "value": null },
                      { "color": "green", "value": 5 },
                      { "color": "yellow", "value": 20 },
                      { "color": "red", "value": 40 }
                    ]
                  }}
                ]
              },
              {
                "matcher": { "id": "byName", "options": "‚¨ÜÔ∏è TX (MB/s)" },
                "properties": [
                  { "id": "unit", "value": "MBs" },
                  { "id": "decimals", "value": 2 },
                  { "id": "custom.displayMode", "value": "gradient-gauge" },
                  { "id": "min", "value": 0 },
                  { "id": "max", "value": 50 },
                  { "id": "thresholds", "value": {
                    "mode": "absolute",
                    "steps": [
                      { "color": "purple", "value": null },
                      { "color": "green", "value": 5 },
                      { "color": "yellow", "value": 20 },
                      { "color": "red", "value": 40 }
                    ]
                  }}
                ]
              }
            ]
          },
          "options": {
            "showHeader": true,
            "footer": {
              "show": true,
              "reducer": ["mean"],
              "countRows": false,
              "fields": ["üíª CPU %", "üß† Memory %", "üíæ Disk %"]
            },
            "sortBy": [
              {
                "displayName": "üè∑Ô∏è Node Name",
                "desc": false
              }
            ]
          }
        },
        {
          "title": "üëë Control Plane (1 node) - k8s-master | t3.xlarge | 4vCPU | 16GB | 80GB",
          "type": "row",
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 22 },
          "collapsed": false
        },
        {
          "title": "Master - CPU",
          "type": "stat",
          "gridPos": { "h": 3, "w": 3, "x": 0, "y": 23 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"}) * 100)",
              "legendFormat": "CPU %"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 50 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "Master - Memory",
          "type": "stat",
          "gridPos": { "h": 3, "w": 3, "x": 3, "y": 23 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "(1 - avg(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"} / node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"})) * 100",
              "legendFormat": "Memory %"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "Master - Disk",
          "type": "stat",
          "gridPos": { "h": 3, "w": 3, "x": 6, "y": 23 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "(1 - avg(node_filesystem_avail_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"} * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"} / node_filesystem_size_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"} * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"})) * 100",
              "legendFormat": "Disk %"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 70 },
                  { "color": "red", "value": 85 }
                ]
              }
            }
          }
        },
        {
          "title": "Master - Network",
          "type": "stat",
          "gridPos": { "h": 3, "w": 3, "x": 9, "y": 23 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "sum(rate(node_network_receive_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"}) / 1024 / 1024",
              "legendFormat": "RX MB/s"
            },
            {
              "expr": "sum(rate(node_network_transmit_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"}) / 1024 / 1024",
              "legendFormat": "TX MB/s"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "MBs",
              "decimals": 2
            }
          }
        },
        {
          "title": "üìà Time Series - Resource Trends",
          "type": "row",
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 },
          "collapsed": false
        },
        {
          "title": "All Nodes - CPU Usage % (Time Series)",
          "type": "timeseries",
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 27 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg by (nodename) (rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{}) * 100)",
              "legendFormat": "{{nodename}}"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "custom": { "lineWidth": 1, "fillOpacity": 10, "showPoints": "never" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          },
          "options": {
            "legend": { "displayMode": "table", "placement": "right", "calcs": ["mean", "max"] }
          }
        },
        {
          "title": "All Nodes - Memory Usage % (Time Series)",
          "type": "timeseries",
          "gridPos": { "h": 8, "w": 12, "x": 12, "y": 27 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "(1 - (node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(nodename) node_uname_info{} / node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(nodename) node_uname_info{})) * 100",
              "legendFormat": "{{nodename}}"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "custom": { "lineWidth": 1, "fillOpacity": 10, "showPoints": "never" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 70 },
                  { "color": "red", "value": 85 }
                ]
              }
            }
          },
          "options": {
            "legend": { "displayMode": "table", "placement": "right", "calcs": ["mean", "max"] }
          }
        },
        {
          "title": "All Nodes - Disk Usage % (Time Series)",
          "type": "timeseries",
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 35 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "(1 - (node_filesystem_avail_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"} * on(instance) group_left(nodename) node_uname_info{} / node_filesystem_size_bytes{job=\"node-exporter\", mountpoint=\"/\", fstype!=\"rootfs\"} * on(instance) group_left(nodename) node_uname_info{})) * 100",
              "legendFormat": "{{nodename}}"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "custom": { "lineWidth": 1, "fillOpacity": 10, "showPoints": "never" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 70 },
                  { "color": "red", "value": 85 }
                ]
              }
            }
          },
          "options": {
            "legend": { "displayMode": "table", "placement": "right", "calcs": ["mean", "max"] }
          }
        },
        {
          "title": "All Nodes - Network I/O (MB/s)",
          "type": "timeseries",
          "gridPos": { "h": 8, "w": 12, "x": 12, "y": 35 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "sum by (nodename) (rate(node_network_receive_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m]) * on(instance) group_left(nodename) node_uname_info{}) / 1024 / 1024",
              "legendFormat": "{{nodename}} RX"
            },
            {
              "expr": "sum by (nodename) (rate(node_network_transmit_bytes_total{job=\"node-exporter\", device!~\"lo|veth.*|cali.*|tunl.*|docker.*\"}[5m]) * on(instance) group_left(nodename) node_uname_info{}) / 1024 / 1024",
              "legendFormat": "{{nodename}} TX"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "MBs",
              "custom": { "lineWidth": 1, "fillOpacity": 10, "showPoints": "never" }
            }
          },
          "options": {
            "legend": { "displayMode": "table", "placement": "right", "calcs": ["mean", "max"] }
          }
        },
        {
          "title": "üè∑Ô∏è Node Categories - Quick Stats",
          "type": "row",
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 43 },
          "collapsed": false
        },
        {
          "title": "üîå API Nodes (9) Avg CPU",
          "type": "stat",
          "gridPos": { "h": 3, "w": 4, "x": 0, "y": 44 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*api-.*\"}) * 100)",
              "legendFormat": "CPU"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "‚öôÔ∏è Workers (4) Avg CPU",
          "type": "stat",
          "gridPos": { "h": 3, "w": 4, "x": 4, "y": 44 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*worker-.*\"}) * 100)",
              "legendFormat": "CPU"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "üíæ Data Layer (6) Avg CPU",
          "type": "stat",
          "gridPos": { "h": 3, "w": 4, "x": 8, "y": 44 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*redis.*|.*postgresql.*|.*rabbitmq.*\"}) * 100)",
              "legendFormat": "CPU"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "üìä Observability (2) Avg CPU",
          "type": "stat",
          "gridPos": { "h": 3, "w": 4, "x": 12, "y": 44 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*monitoring.*|.*logging.*\"}) * 100)",
              "legendFormat": "CPU"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "üåê Network (3) Avg CPU",
          "type": "stat",
          "gridPos": { "h": 3, "w": 4, "x": 16, "y": 44 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*ingress.*|.*sse-gateway.*|.*event-router.*\"}) * 100)",
              "legendFormat": "CPU"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 60 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        },
        {
          "title": "üëë Control Plane (1) CPU",
          "type": "stat",
          "gridPos": { "h": 3, "w": 4, "x": 20, "y": 44 },
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "targets": [
            {
              "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\", job=\"node-exporter\"}[5m]) * on(instance) group_left(nodename) node_uname_info{nodename=~\".*master.*\"}) * 100)",
              "legendFormat": "CPU"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 50 },
                  { "color": "red", "value": 80 }
                ]
              }
            }
          }
        }
      ]
    }
