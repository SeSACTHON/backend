# character 단위 테스트용 Docker Compose
# 사용법: docker-compose -f apps/character/docker-compose.test.yml up --build test

services:
  test:
    build:
      context: ../..
      dockerfile: apps/character/Dockerfile.test
    container_name: character-test
    environment:
      PYTHONPATH: /app
      # pytest 설정
      PYTEST_ADDOPTS: -v --tb=short
    volumes:
    - ../../apps:/app/apps:ro
    - ../../domains:/app/domains:ro
    - ../../pyproject.toml:/app/pyproject.toml:ro
    command: [pytest, apps/character/tests, -v, --tb=short]
